<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Password Generator | HeetDevLab</title>

<link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/password-generator.css">  
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
</head>

<body>

<div id="particles-js"></div>

<div class="content">

<section class="hero">
<h1>üß† Advanced Password Generator</h1>
<p>Generate secure & customizable passwords instantly.</p>
</section>

<section class="checker-box">

<label>Password Length: <span id="lengthValue">12</span></label>
<input type="range" id="length" min="6" max="32" value="12">

<div class="options">
<label><input type="checkbox" id="uppercase" checked> Uppercase</label>
<label><input type="checkbox" id="lowercase" checked> Lowercase</label>
<label><input type="checkbox" id="numbers" checked> Numbers</label>
<label><input type="checkbox" id="symbols"> Symbols</label>
<label><input type="checkbox" id="excludeSimilar"> Exclude Similar (O, 0, l)</label>
<label><input type="checkbox" id="avoidRepeat"> Avoid Repeating Characters</label>
</div>

<button class="btn" onclick="generatePassword()">Generate Password</button>

<div class="result-box">
<input type="text" id="passwordOutput" readonly>
<button class="btn" onclick="copyPassword()">Copy</button>
</div>

<div class="strength-bar">
    <div id="strengthFill"></div>
</div>

<p id="strengthText">Strength: -</p>

<div id="copyToast" class="toast">Password Copied!</div>

</section>

<div style="text-align:center; margin-top:30px;">
<a href="../index.html" class="btn">‚Üê Back to Tools</a>
</div>

<footer style="text-align:center; padding:60px 20px; font-size:0.8rem; color:#888;">
¬© 2026 HeetDevLab ‚Ä¢ Privacy First ‚Ä¢ Indie Built
</footer>

</div>

<script src="../particles-config.js"></script>

<script>
// ===== DOM ELEMENTS =====

const lengthSlider = document.getElementById("length");
const lengthValue = document.getElementById("lengthValue");
const passwordOutput = document.getElementById("passwordOutput");

lengthSlider.addEventListener("input", () => {
    lengthValue.textContent = lengthSlider.value;
    generatePassword();
});

// ===== GENERATE PASSWORD =====

function generatePassword() {

    const length = parseInt(lengthSlider.value);
    const useUpper = document.getElementById("uppercase").checked;
    const useLower = document.getElementById("lowercase").checked;
    const useNumbers = document.getElementById("numbers").checked;
    const useSymbols = document.getElementById("symbols").checked;
    const excludeSimilar = document.getElementById("excludeSimilar").checked;
    const avoidRepeat = document.getElementById("avoidRepeat").checked;

    let upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let lower = "abcdefghijklmnopqrstuvwxyz";
    let numbers = "0123456789";
    let symbols = "!@#$%^&*()_+{}[]<>?";

    if (excludeSimilar) {
        upper = upper.replace(/[O]/g, '');
        lower = lower.replace(/[l]/g, '');
        numbers = numbers.replace(/[01]/g, '');
    }

    let characters = "";

    if (useUpper) characters += upper;
    if (useLower) characters += lower;
    if (useNumbers) characters += numbers;
    if (useSymbols) characters += symbols;

    if (!characters) {
        alert("Select at least one option!");
        return;
    }

    let password = "";

    while (password.length < length) {
        const randomIndex = crypto.getRandomValues(new Uint32Array(1))[0] % characters.length;
        const char = characters[randomIndex];

        if (avoidRepeat && password.includes(char)) continue;

        password += char;
    }

    passwordOutput.value = password;
    checkStrength(password);
    calculateEntropy(password, characters.length);
}

// ===== COPY FUNCTION =====

function copyPassword() {
    navigator.clipboard.writeText(passwordOutput.value);
    showToast("Password Copied!");
}

// ===== DOWNLOAD FUNCTION =====

function downloadPassword() {
    const blob = new Blob([passwordOutput.value], { type: "text/plain" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "password.txt";
    link.click();
    showToast("Password Downloaded!");
}

// ===== TOAST =====

function showToast(message) {
    const toast = document.getElementById("copyToast");
    toast.textContent = message;
    toast.classList.add("show");

    setTimeout(() => {
        toast.classList.remove("show");
    }, 2000);
}

// ===== STRENGTH =====

function checkStrength(password) {
    let score = 0;

    if (password.length >= 12) score++;
    if (/[A-Z]/.test(password)) score++;
    if (/[a-z]/.test(password)) score++;
    if (/[0-9]/.test(password)) score++;
    if (/[^A-Za-z0-9]/.test(password)) score++;

    const fill = document.getElementById("strengthFill");
    const text = document.getElementById("strengthText");

    if (score <= 2) {
        fill.style.width = "33%";
        fill.style.background = "red";
        text.textContent = "Strength: Weak";
    } 
    else if (score <= 4) {
        fill.style.width = "66%";
        fill.style.background = "orange";
        text.textContent = "Strength: Medium";
    } 
    else {
        fill.style.width = "100%";
        fill.style.background = "lime";
        text.textContent = "Strength: Strong";
    }
}

// ===== ENTROPY =====

function calculateEntropy(password, poolSize) {
    const entropy = password.length * Math.log2(poolSize);
    document.getElementById("entropyText").textContent =
        "Entropy: " + entropy.toFixed(2) + " bits";
}

// Generate first password on load
generatePassword();
</script>

</body>
</html>
