<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Password Generator | HeetDevLab</title>

<link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/password-generator.css">  
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
</head>

<body>

<div id="particles-js"></div>

<div class="content">

<section class="hero">
<h1>üß† Advanced Password Generator</h1>
<p>Generate secure & customizable passwords instantly.</p>
</section>

<section class="checker-box">

<label>Password Length: <span id="lengthValue">12</span></label>
<input type="range" id="length" min="6" max="32" value="12">

<div class="options">
<label><input type="checkbox" id="uppercase" checked> Uppercase</label>
<label><input type="checkbox" id="lowercase" checked> Lowercase</label>
<label><input type="checkbox" id="numbers" checked> Numbers</label>
<label><input type="checkbox" id="symbols"> Symbols</label>
<label><input type="checkbox" id="excludeSimilar"> Exclude Similar (O, 0, l)</label>
<label><input type="checkbox" id="avoidRepeat"> Avoid Repeating Characters</label>
<input type="text" id="customSeed" placeholder="e.g. heet">
<label>
  <input type="checkbox" id="mutateSeed">
  Auto Mutate Keyword
</label>

<div id="mutationSection" style="display:none; margin-top:15px;">

  <label>
  Mutation Level:
  <span id="mutationLevelText">Light</span>
</label>

<input type="range" id="mutationLevel" min="1" max="4" value="1">

  <p id="mutatedPreview" style="color:#00f5ff; margin-top:8px;"></p>

  <div class="impact-bar">
    <div id="impactFill"></div>
  </div>

  <p id="impactText" style="margin-top:6px;"></p>

</div>

<div class="action-area">
   <button class="btn primary-btn" onclick="generatePassword()">
      Generate Password
   </button>

   <div class="result-box">
      <input type="text" id="passwordOutput" readonly>
      <button class="btn small-btn" onclick="copyPassword()">Copy</button>
   </div>
</div>

<div class="strength-bar">
    <div id="strengthFill"></div>
</div>
<div class="metrics">
   <span id="strengthText">Strength: -</span>
   <span id="entropyText">Entropy: -</span>
</div>

<button class="btn" onclick="downloadPassword()">Download .txt</button>
<div id="copyToast" class="toast">Password Copied!</div>

</section>

<div style="text-align:center; margin-top:30px;">
<a href="../index.html" class="btn">‚Üê Back to Tools</a>
</div>

<footer style="text-align:center; padding:60px 20px; font-size:0.8rem; color:#888;">
¬© 2026 HeetDevLab ‚Ä¢ Privacy First ‚Ä¢ Indie Built
</footer>

</div>

<script src="../particles-config.js"></script>


<script>

document.addEventListener("DOMContentLoaded", () => {

    const lengthSlider = document.getElementById("length");
    const lengthValue = document.getElementById("lengthValue");

    lengthValue.textContent = lengthSlider.value;

    lengthSlider.addEventListener("input", () => {
        lengthValue.textContent = lengthSlider.value;
        generatePassword();
    });

    // Mutation Level Listener
    const mutationSlider = document.getElementById("mutationLevel");
const mutationText = document.getElementById("mutationLevelText");

if (mutationSlider && mutationText) {
    mutationSlider.addEventListener("input", () => {

        const levels = {
            1: "Light",
            2: "Medium",
            3: "Strong",
            4: "Extreme"
        };

        mutationText.textContent = levels[mutationSlider.value];

        generatePassword();
    });
}
const mutateCheckbox = document.getElementById("mutateSeed");
const mutationSection = document.getElementById("mutationSection");

if (mutateCheckbox && mutationSection) {
    mutateCheckbox.addEventListener("change", () => {
        mutationSection.style.display =
            mutateCheckbox.checked ? "block" : "none";

        generatePassword();
    });
}
    if (mutationSlider && mutationText) {
        mutationSlider.addEventListener("input", () => {
            mutationText.textContent =
                mutationSlider.value == 1 ? "Light" : "Aggressive";
        });
    }

    generatePassword();
});

function generatePassword() {

    const length = parseInt(document.getElementById("length").value);
    const useUpper = document.getElementById("uppercase").checked;
    const useLower = document.getElementById("lowercase").checked;
    const useNumbers = document.getElementById("numbers").checked;
    const useSymbols = document.getElementById("symbols").checked;
    const excludeSimilar = document.getElementById("excludeSimilar").checked;
    const avoidRepeat = document.getElementById("avoidRepeat").checked;
    const mutateSeed = document.getElementById("mutateSeed").checked;

    const seedInput = document.getElementById("customSeed").value.trim();
    let processedSeed = seedInput;

    if (mutateSeed && seedInput.length > 0) {
        processedSeed = mutateKeyword(seedInput);
        document.getElementById("mutatedPreview").textContent =
            "Preview: " + processedSeed;
        updateImpactBar(true);
    } else {
        document.getElementById("mutatedPreview").textContent = "";
        updateImpactBar(false);
    }

    let upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let lower = "abcdefghijklmnopqrstuvwxyz";
    let numbers = "0123456789";
    let symbols = "!@#$%^&*()_+{}[]<>?";

    if (excludeSimilar) {
        upper = upper.replace(/[O]/g, "");
        lower = lower.replace(/[l]/g, "");
        numbers = numbers.replace(/[01]/g, "");
    }

    let characters = "";
    if (useUpper) characters += upper;
    if (useLower) characters += lower;
    if (useNumbers) characters += numbers;
    if (useSymbols) characters += symbols;

    if (!characters) {
        alert("Select at least one character type!");
        return;
    }

    let randomLength = length - processedSeed.length;
    if (randomLength < 0) randomLength = 0;

    let randomPart = "";

    while (randomPart.length < randomLength) {
        const randomIndex =
            crypto.getRandomValues(new Uint32Array(1))[0] % characters.length;

        const char = characters[randomIndex];

        if (avoidRepeat && randomPart.includes(char)) continue;

        randomPart += char;
    }

    let finalPassword = randomPart;

    if (processedSeed.length > 0 && processedSeed.length < length) {
        const insertPos =
            crypto.getRandomValues(new Uint32Array(1))[0] %
            (randomPart.length + 1);

        finalPassword =
            randomPart.slice(0, insertPos) +
            processedSeed +
            randomPart.slice(insertPos);
    }

    finalPassword = finalPassword.slice(0, length);

    document.getElementById("passwordOutput").value = finalPassword;

    checkStrength(finalPassword);
    calculateEntropy(randomPart, characters.length);
}

// ===== IMPACT BAR =====

function updateImpactBar(isMutated) {

    const fill = document.getElementById("impactFill");
    const text = document.getElementById("impactText");

    if (!fill || !text) return;

    if (isMutated) {
        fill.style.width = "80%";
        fill.style.background = "lime";
        text.textContent = "Security Impact: Improved by Mutation";
        text.style.color = "lime";
    } else {
        fill.style.width = "40%";
        fill.style.background = "orange";
        text.textContent = "Security Impact: Basic Seed";
        text.style.color = "orange";
    }
}

// ===== MUTATION =====

function mutateKeyword(word) {

    const level = parseInt(document.getElementById("mutationLevel").value);

    const maps = {
        1: { a:"4", e:"3", i:"1", o:"0", s:"5", t:"7" },

        2: { a:"4", e:"3", i:"1", o:"0", s:"5", t:"7",
             h:"#", l:"|", b:"8" },

        3: { a:"@", e:"3", i:"!", o:"0", s:"$", t:"7",
             h:"#", l:"|", b:"8", g:"9" },

        4: { a:"@", e:"3", i:"!", o:"0", s:"$", t:"7",
             h:"#", l:"|", b:"8", g:"9",
             c:"(", k:"|<", m:"^^" }
    };

    const map = maps[level];

    let mutated = "";

    for (let char of word) {

        const lower = char.toLowerCase();

        if (map[lower] && Math.random() > (0.6 - level * 0.1)) {
            mutated += map[lower];
        } else {
            mutated += Math.random() > 0.5
                ? char.toUpperCase()
                : char.toLowerCase();
        }
    }
    return mutated;
}

</script>

</body>
</html>
